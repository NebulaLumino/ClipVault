module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},35419,e=>{"use strict";var t,r,a,n,i,o=e.i(47909),s=e.i(74017),l=e.i(96250),d=e.i(59756),u=e.i(61916),c=e.i(74677),p=e.i(69741),E=e.i(16795),h=e.i(87718),R=e.i(95169),A=e.i(47587),x=e.i(66012),w=e.i(70101),f=e.i(26937),v=e.i(10372),m=e.i(93695);e.i(52474);var g=e.i(220),C=e.i(89171);let y=process.env.DATABASE_URL;function T(e){return e.toLowerCase()}let N=new class{async linkAccount(t,r,a,n,i,o){if(!y)throw Error("DATABASE_URL is not configured");let{PrismaClient:s}=await e.A(83700),l=new s({datasources:{db:{url:y}}});try{let e=T(r),o=await l.linkedAccount.findFirst({where:{userId:t,platform:e}});if(o)return l.linkedAccount.update({where:{id:o.id},data:{platformAccountId:a,platformUsername:n,accessToken:i,updatedAt:new Date}});return l.linkedAccount.create({data:{userId:t,platform:e,platformAccountId:a,platformUsername:n,accessToken:i}})}finally{await l.$disconnect()}}async unlinkAccount(t,r){if(!y)throw Error("DATABASE_URL is not configured");let{PrismaClient:a}=await e.A(83700),n=new a({datasources:{db:{url:y}}});try{let e=T(r);await n.linkedAccount.deleteMany({where:{userId:t,platform:e}})}finally{await n.$disconnect()}}async getLinkedAccounts(t){if(!y)throw Error("DATABASE_URL is not configured");let{PrismaClient:r}=await e.A(83700),a=new r({datasources:{db:{url:y}}});try{return a.linkedAccount.findMany({where:{userId:t}})}finally{await a.$disconnect()}}};var I=((t={}).STEAM="STEAM",t.RIOT="RIOT",t.EPIC="EPIC",t);async function S(e){let t=e.nextUrl.searchParams,r=t.get("code"),a=t.get("state"),n=t.get("openid_claimed_id"),i=n?n.split("/").pop():void 0;if(!r||!a)return C.NextResponse.redirect(new URL("/linked?error=Missing+code+or+state",e.url));if(!i)return C.NextResponse.redirect(new URL("/linked?error=Missing+Steam+ID",e.url));try{return await N.linkAccount(a,I.STEAM,i,void 0,r),C.NextResponse.redirect(new URL("/linked?platform=steam",e.url))}catch(t){return console.error("Steam OAuth callback error:",t),C.NextResponse.redirect(new URL("/linked?error=Failed+to+link+account",e.url))}}(r={}).PENDING="PENDING",r.IN_PROGRESS="IN_PROGRESS",r.COMPLETED="COMPLETED",r.FAILED="FAILED",(a={}).PENDING="PENDING",a.PROCESSING="PROCESSING",a.READY="READY",a.DELIVERED="DELIVERED",a.FAILED="FAILED",(n={}).DM="DM",n.CHANNEL="CHANNEL",(i={}).HIGHLIGHT="HIGHLIGHT",i.PLAY_OF_THE_GAME="PLAY_OF_THE_GAME",i.ACE="ACE",i.CLUTCH="CLUTCH",i.SKILL_SHOT="SKILL_SHOT",e.s(["GET",()=>S],34820);var _=e.i(34820);let P=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/auth/steam/route",pathname:"/api/auth/steam",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/auth/steam/route.ts",nextConfigOutput:"standalone",userland:_}),{workAsyncStorage:k,workUnitAsyncStorage:D,serverHooks:L}=P;function O(){return(0,l.patchFetch)({workAsyncStorage:k,workUnitAsyncStorage:D})}async function b(e,t,r){P.isDev&&(0,d.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/auth/steam/route";a=a.replace(/\/index$/,"")||"/";let n=await P.prepare(e,t,{srcPage:a,multiZoneDraftMode:!1});if(!n)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:i,params:o,nextConfig:l,parsedUrl:C,isDraftMode:y,prerenderManifest:T,routerServerContext:N,isOnDemandRevalidate:I,revalidateOnlyGenerated:S,resolvedPathname:_,clientReferenceManifest:k,serverActionsManifest:D}=n,L=(0,p.normalizeAppPath)(a),O=!!(T.dynamicRoutes[L]||T.routes[_]),b=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,C,!1):t.end("This page could not be found"),null);if(O&&!y){let e=!!T.routes[_],t=T.dynamicRoutes[L];if(t&&!1===t.fallback&&!e){if(l.experimental.adapterPath)return await b();throw new m.NoFallbackError}}let H=null;!O||P.isDev||y||(H="/index"===(H=_)?"/":H);let U=!0===P.isDev||!O,M=O&&!U;D&&k&&(0,c.setManifestsSingleton)({page:a,clientReferenceManifest:k,serverActionsManifest:D});let q=e.method||"GET",j=(0,u.getTracer)(),G=j.getActiveScopeSpan(),F={params:o,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!l.experimental.authInterrupts},cacheComponents:!!l.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,d.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:l.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,n)=>P.onRequestError(e,t,a,n,N)},sharedContext:{buildId:i}},$=new E.NodeNextRequest(e),K=new E.NodeNextResponse(t),B=h.NextRequestAdapter.fromNodeNextRequest($,(0,h.signalFromNodeResponse)(t));try{let n=async e=>P.handle(B,F).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=j.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==R.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${q} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${q} ${a}`)}),i=!!(0,d.getRequestMeta)(e,"minimalMode"),o=async o=>{var d,u;let c=async({previousCacheEntry:s})=>{try{if(!i&&I&&S&&!s)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await n(o);e.fetchMetrics=F.renderOpts.fetchMetrics;let l=F.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let d=F.renderOpts.collectedTags;if(!O)return await (0,x.sendResponse)($,K,a,F.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,w.toNodeOutgoingHttpHeaders)(a.headers);d&&(t[v.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==F.renderOpts.collectedRevalidate&&!(F.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&F.renderOpts.collectedRevalidate,n=void 0===F.renderOpts.collectedExpire||F.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:F.renderOpts.collectedExpire;return{value:{kind:g.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==s?void 0:s.isStale)&&await P.onRequestError(e,t,{routerKind:"App Router",routePath:a,routeType:"route",revalidateReason:(0,A.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:I})},!1,N),t}},p=await P.handleResponse({req:e,nextConfig:l,cacheKey:H,routeKind:s.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:S,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:i});if(!O)return null;if((null==p||null==(d=p.value)?void 0:d.kind)!==g.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(u=p.value)?void 0:u.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",I?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),y&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let E=(0,w.fromNodeOutgoingHttpHeaders)(p.value.headers);return i&&O||E.delete(v.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||t.getHeader("Cache-Control")||E.get("Cache-Control")||E.set("Cache-Control",(0,f.getCacheControlHeader)(p.cacheControl)),await (0,x.sendResponse)($,K,new Response(p.value.body,{headers:E,status:p.value.status||200})),null};G?await o(G):await j.withPropagatedContext(e.headers,()=>j.trace(R.BaseServerSpan.handleRequest,{spanName:`${q} ${a}`,kind:u.SpanKind.SERVER,attributes:{"http.method":q,"http.target":e.url}},o))}catch(t){if(t instanceof m.NoFallbackError||await P.onRequestError(e,t,{routerKind:"App Router",routePath:L,routeType:"route",revalidateReason:(0,A.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:I})},!1,N),O)throw t;return await (0,x.sendResponse)($,K,new Response(null,{status:500})),null}}e.s(["handler",()=>b,"patchFetch",()=>O,"routeModule",()=>P,"serverHooks",()=>L,"workAsyncStorage",()=>k,"workUnitAsyncStorage",()=>D],35419)},83700,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_@prisma_client_c5ee037a._.js"].map(t=>e.l(t))).then(()=>t(63021)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3260bab7._.js.map